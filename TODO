TODO de la version 2.3 de Wanewsletter

Restant à faire :
-----------------

- Rendre plus simple l’ajout et remplissage de champs supplémentaires
- Rendre plus simple la possibilité que les emails d'inscription, confirmation, désinscription soient
  au format HTML
- Permettre les inscriptions à plusieurs listes en même temps
- Trouver solution pour réduire longueur des liens de confirmation et désinscription
  - Stockage d’un code spécial dans abo_liste
    d’où forme du lien :
	http://domain.tld/path/to/subscribe.php?code=c61b334dbf80e6b4c61b
	- code nous donne entrée dans abo_liste qui donne :
	  - ID de liste
	  - ID abonné donc email
	  - Action car si :
	    - confirmed = 0, on attend forcément une confirmation
		- confirmed = 1, on attend forcément une désinscription
	au lieu de :
	http://domain.tld/path/to/subscribe.php?action=inscription&email=bobe@phpcodeur.net&code=c61b334dbf80e6b442feec9a08b4b40b&liste=5
  - Donc ajouter un champ register_key ? 16 ou 32 caractères ?
  - Permettrer de facilité l’implémentation de "Inscription à plusieurs listes en même temps" car
    le code fourni pourrait matcher plusieurs entrées de la table abo_liste, correspondant aux
	listes dont on fait confirmation ...?

- Réorganiser les scripts d’installation et mise à jour
  - Suppression champs version de wa_config ?
  - Recréer tous les index dans le script de mise à jour ?
  - Modifier les types des champs admin_id et liste_id (tinyint -> smallint)
  - Rendre optionnel le dbhost et dbuser dans script d'install (postgresql peut ne nécessiter que dbname pour pg_connect())
  - Ajouts register_key, register_date et confirmed et cp éventuel des données en provenance de abonnes

- Revoir cron.php
  - Fonctionnement en ligne de commande
  - Modifs sur class.form.php bien prises en compte

- Revoir profil_cp.php
  - Modifs sur class.form.php bien prises en compte

- Passer newsletter texte en utf-8 si caractères windows-1252, sauf si une constante
  mise à true/false pour préférer translitération
- Vérifier que les schémas de tables sont valides pour chaque db (ils sont ok pour MySQL et SQLite, à confirmer. Tester pour PostgreSQL)

- passer les id de manière sécure (abo_id ou log_id) lors des suppressions dans view.php, actuellement, c'est pas secure
  passer le tableau d'ids en session ? champ session_data en plus dans la table session et stocker tableau
  de données de session serialisé ?
- Optimiser la phase d’envoi


À peaufiner/terminer :
----------------------

- S’assurer du bon fonctionnement sur la future branche PHP 5.1.x

- Annuler un envoi
- Revoir la doc de manière générale
  - Ajout des abréviations dans la documentation

- Tester pour voir si modifs concernant confirmation à chaque inscription sont OK


Pas sùr/Chiant à faire :
------------------------

- Voir pour rendre refonctionnel la détection approfondie des emails (sinon, la supprimer, pas seulement la désactiver)
- Fournir un gestionnaire de bounces basique dans le répertoire contrib/ (en cours)
- Proposer une API utilisable dans d'autres applications (style SPIP ou encore phpBB...)
  - Tenir compte du fait que magic_quotes peut être à on ou off, et que les données dans $_POST, $_GET ...
    peuvent avoir été modifiées par l'application qui fait appel à l'API wanewsletter (ex: phpBB) donc
    un paramètre magic_quotes_gpc interne et null par défaut mais peut être positionné à true ou false
  - Voir travaux dans tmp/wanewsletter.php
- Voir avec J.J Solari pour fct des javascript dans Safari


Bric à brac :
-------------

"Oui, en fait je prend un raccourci. La cassure n'est pas sur 3.23 / 4.0 mais sur
4.0.x / 4.0.y, je ne me souviens plus exactement où.
Il y a aussi des gens qui utilisent les mysql_* avec mysql 4.1 et > mais c'est
au prix d'une bidouille (une config spéciale du serveur mysql qui lui demande
d'utiliser les anciens protocoles d'authentification)"


Ajout à la FAQ :
----------------

- pk l'email de retour d'erreur n'est pas pris en compte -> À cause du safe_mode
- Parler des possibilités de donner un coup de main au projet (don + aides à la traduction)
- Parler de la possibilité de désactiver la vérification des tags {LINKS} avant envoi.php et
  des obligations légales liées à la LCEN (pour la France)
  http://www.legifrance.gouv.fr/WAspad/UnTexteDeJorf?numjo=ECOX0200175L

